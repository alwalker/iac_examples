name: Run Database Migrations
on:
  workflow_dispatch:
jobs:
  push-to-ecr:
    name: Run Database Migrations
    runs-on: ubuntu-latest
    steps:
      - run: |
          aws ecs run-task \
            --network-configuration 'awsvpcConfiguration={subnets=["subnet-095952196fdf107db","subnet-0cb3458c58ad35247","subnet-018f9a7fad1f6743a","subnet-0c3ce2d0040496a6c","subnet-0a45f4f61bc3fe8d0","subnet-0a1dd9037e2907257"],securityGroups=["sg-0871cb56e6c05126e"],assignPublicIp=DISABLED}' \
            --cluster arn:aws:ecs:us-east-1:107713621036:cluster/prod \
            --task-definition outline-migrations:1
        env:
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          AWS_DEFAULT_REGION: us-east-1
