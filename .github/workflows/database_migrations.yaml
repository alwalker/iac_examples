name: Run Database Migrations
on:
  workflow_dispatch:
jobs:
  push-to-ecr:
    name: Run Database Migrations
    runs-on: ubuntu-latest
    steps:
      - run: |
          aws ecs run-task \
            --network-configuration 'awsvpcConfiguration={subnets=["subnet-0f923beddc63e8a2a","subnet-0d969f4989660f146","subnet-0237fc91cf498fd12","subnet-07a15e2236885741d","subnet-02de36814f7fea7e9","subnet-0b1183414b0518b54"],securityGroups=["sg-0c8db2021810a14f8"],assignPublicIp=DISABLED}' \
            --cluster arn:aws:ecs:us-east-1:242364459859:cluster/prod \
            --task-definition outline-migrations:1
        env:
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          AWS_DEFAULT_REGION: us-east-1
